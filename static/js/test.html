<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h1>script load and run test</h1>
<script>

	var context = {},
		currentContext = null;

	function loadScript(url, callback){
		var d = document;
		var s = d.createElement("script");
		s.type = "text/javascript";
		s.src = url;
		s.onload = function(e){
			callback.call(this, e);
		};
		d.body.appendChild(s);
	}

	function define(fn){
		currentContext = fn();
	}

	window.onload = function(){

		loadScript('./common/http.js', function(_this, e){
			context['http'] = currentContext;
			currentContext = null;
		});

		loadScript('./common/cookie.js', function(_this, e){
			context['cookie'] = currentContext;
			currentContext = null;
		});

		loadScript('./common/animation.js', function(_this, e){
			context['animation'] = currentContext;
			currentContext = null;
		});

	}
</script>
</body>
</html>